# EASYLINK
easy link protocol by homebus

PRE  SFD  LEN  LCB  SRC  DST  TPE  PAY  FCS
 1    1    2    1    1    1    1    n    2
 
LCB 
BIT0: 1 公告发布
定向发布
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
//特殊地址分配
//0x00 空地址
//0xFF 空地址
//0x01 租约中心地址
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
TPE: 0x01 地址租约服务
租约中心(地址:0x01)
首租流程
续租流程
租约中心申请流程

上电-->首租-->首租请求报文，SRC 0x00 DST 0x01-->租约中心应答-->获取租期和地址-->确认租约-->完毕
                                             -->租约中心无应答-->重试3次-->申请为租约中心

    -->续租-->续租请求报文，SRC 0x00 DST 0x01

上电-->发布租约中心公告3次-->无冲突反馈-->正式成为租约中心,赋地址0x01
                          -->有冲突反馈-->退出租约中心申请-->进入地址租赁申请流程
//--------------------------------------------------------------------------------------------------
CMD MSGID  LID CADDR  
 1    2     8    1     
//--------------------------------------------------------------------------------------------------
CMD0:0x01 租约中心公告,
          空地址时,5秒内公告5次,无应答,本机成为租约中心,获得0x01地址。
          已经成为租约中心,每2小时,公告一次,1秒内连续发送3个报文。
          01  03 48  89 76 73 87 AE 83 78 31  FF
		  01  03 48  89 76 73 87 AE 83 78 31  01
		                       本机ID
							   
     0x81 公告应答,收到应答,租约中心冲突,放弃成为租约中心。
	      81  03 48  89 76 73 87 AE 83 78 38  FF 
		  
CMD1:0x02 租约请求,(空地址代表首租,其他地址代表续租)
		  02  35 AE  89 76 73 87 AE 83 78 4A  FF(03) 
		  
	 0x82 请求应答	  
          82  35 AE  89 76 73 87 AE 83 78 38  03	
		  
	 0xA2 租约失败,(一般是系统地址容量已满)
          A3  35 AE  89 76 73 87 AE 83 78 38  FF
		  
	 0xC2 租约确认
          C2  35 AE  89 76 73 87 AE 83 78 4A  03	 
		  
		  

						  
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
TPE: 0x02 公告发布
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
TPE: 0x03 固件升级
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
资源定位方式
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
消息服务质量
QoS 0: 消息至多传送 1 次。
QoS 1: 消息至少传送 1 次。
QoS 2: 消息仅仅传送 1 次。
